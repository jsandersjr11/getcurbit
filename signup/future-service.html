<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style>.wf-force-outline-none[tabindex="-1"]:focus{outline:none;}</style>
    <title>Curbit | Trash bin to curb service</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    
    <!-- Stylesheets -->
    <link href="../assets/css/styles.css" rel="stylesheet" type="text/css">
    <link href="../assets/css/external-styles.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/" rel="preconnect">
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
    
    <!-- Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    
    <!-- Add Mapbox Search JS -->
    <script id="search-js" defer src="https://api.mapbox.com/search-js/v1.0.0-beta.21/web.js"></script>

    <!-- Google Places API -->
    <script type="module" src="https://unpkg.com/@googlemaps/extended-component-library@0.6"></script>
    
    <!-- Mapbox -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css' rel='stylesheet' />
    
    <!-- Add Radar -->
    <script src="https://js.radar.com/v3/radar.min.js"></script>
    <script>
        radar.initialize('prj_live_pk_...'); // Replace with your actual Radar API key
    </script>

    <!-- Add address input styles -->
    <style>
    .address-input-wrapper {
        position: relative;
    }
    .suggestions-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border: 1px solid #ddd;
        border-top: none;
        max-height: 200px;
        overflow-y: auto;
        display: none;
        z-index: 1000;
    }
    .suggestion {
        padding: 8px 12px;
        cursor: pointer;
    }
    .suggestion:hover {
        background-color: #f5f5f5;
    }
    </style>

    <!-- Crisp Chat Widget -->
    <script type="text/javascript">
        window.$crisp=[];
        window.CRISP_WEBSITE_ID="2fc9e909-bbab-4e77-8731-9cd4e914a997";
        (function(){
            d=document;
            s=d.createElement("script");
            s.src="https://client.crisp.chat/l.js";
            s.async=1;
            d.getElementsByTagName("head")[0].appendChild(s);
        })();
    </script>

    <!-- PostHog Analytics -->
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug getPageViewId captureTraceFeedback captureTraceMetric".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);

        posthog.init('phc_Bayz6syntaElPn6lntH45gaxunqYZsq9zK4gvAQTDnY', {
            api_host: 'https://app.posthog.com',
            session_recording: {
                maskAllInputs: true,
                maskTextClass: 'sensitive-data'
            },
            autocapture: false,
            property_blacklist: ['$ip', '$host', '$pathname']
        });
    </script>
</head>

<body>
    <!-- Navigation -->
    <div data-collapse="medium" 
         data-animation="default" 
         data-duration="400" 
         fs-scrolldisable-element="smart-nav" 
         data-easing="ease" 
         data-easing2="ease" 
         role="banner" 
         class="rl_navbar1_component_dark w-nav">
        <div class="rl_navbar1_container">
            <a href="/" 
               aria-current="page" 
               class="rl_navbar1_logo-link w-nav-brand w--current" 
               aria-label="home">
                <img src="../assets/img/curbit_logo_light_2024.svg" 
                     loading="lazy" 
                     alt="" 
                     class="rl_navbar1_logo">
            </a>
            <div class="rl_navbar1_menu-buttons">
                <a href="https://billing.stripe.com/p/login/6oE7vn2MM8uh7hm8ww" 
                   target="_blank" 
                   class="rl_navbar1_button w-button">Log in</a>
                <a class="rl-button-secondary checkcheck w-button">Check availability</a>
            </div>
        </div>
        <div class="w-nav-overlay" 
             data-wf-ignore="" 
             id="w-nav-overlay-0"></div>
    </div>

    <section class="rl_section_testimonial17">
        <div class="rl-padding-global-3">
            <div class="rl-container-large-3">
                <div class="rl-padding-section-large-3">
                    <div class="rl_testimonial17_component">
                        <div class="rl_testimonial17_heading-wrapper">
                            <div class="rl_pricing18_feature"  style="justify-content: center;"><div class="rl_pricing18_icon-wrapper"><div class="rl_pricing18_icon w-embed"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22.3641 9.16468L22.8355 9.63604C23.0958 9.8964 23.0958 10.3185 22.8354 10.5789L17.4143 16L22.8354 21.4211C23.0958 21.6815 23.0958 22.1036 22.8355 22.364L22.364 22.8354C22.1037 23.0957 21.6816 23.0957 21.4212 22.8353L16.0001 17.4142L10.579 22.8354C10.3186 23.0957 9.89649 23.0957 9.63614 22.8354L9.16478 22.364C8.90442 22.1036 8.9044 21.6815 9.16475 21.4212L14.5859 16L9.16475 10.5788C8.9044 10.3185 8.90442 9.89636 9.16471 9.63607L9.63614 9.16465C9.89649 8.90429 10.3186 8.90427 10.579 9.16462L16.0001 14.5858L21.4212 9.16468C21.6816 8.90432 22.1037 8.90432 22.3641 9.16468Z" fill="black"/>
                                </svg></div></div><div id="checked_address" class="rl-text-style-regular-2"></div></div>
                            <div class="join-waitlist">
                                <div class="rl_layout237_spacing-block-4-2"></div>
                                <h2 class="rl-heading-style-h2-3">Join Our Waiting List<br></h2>
                                <div class="rl_layout237_spacing-block-2-2"></div>
                                <p class="rl-text-style-medium-6">We're not in your area yet, but we're expanding! Join our waiting list and earn rewards by referring others.</p>
                                <div class="rl_layout237_spacing-block-2"></div>
                            </div>
                        </div>
                        <div class="rl_testimonial17_heading-wrapper w-form">
                            <form id="email-form" name="email-form" data-name="Email Form" method="get" class="rl_cta26_form" data-wf-page-id="672640bfdc59efafc1e49e27" data-wf-element-id="ee658513-2a5e-59f7-29dc-a2fb2592b210" aria-label="Email Form">
                                <div class="rl_cta_form-wrapper">
                                    <input class="rl-form-input-2 w-input" maxlength="256" name="CTA-26-Email-2" data-name="CTA 26 Email 2" placeholder="Enter your email" type="email" id="CTA-26-Email-2" required="">
                                    <input type="submit" data-wait="Please wait..." class="rl-button-5 w-button" value="Join our waitlist">
                                </div>
                                <div class="rl_cta26_spacing-block-3"></div>
                                <div class="rl-text-style-tiny-2">By clicking Join our waitlist you're confirming that you agree with our <a href="#" class="rl-text-style-link-2">Terms and Conditions</a>.</div>
                            </form>
                            <div class="rl-success-message-2 w-form-done" tabindex="-1" role="region" aria-label="Email Form success">
                                <div class="rl-success-text rl-heading-style-h2-3">Thank you! Your submission has been received!</div>
                                <p class="rl-text-style-medium-6">You're one step closer to a stress-free garbage day! Thanks for joining the Curbit waitlist. We'll notify you when we launch in your area.</p>
                                <br>
                                <p class="rl-text-style-medium-6">Want to speed up the process? Share your unique referral link with your neighbors and earn service credits when they sign up.</p>
                            </div>
                            <div class="rl-error-message-2 w-form-fail" tabindex="-1" role="region" aria-label="Email Form failure">
                                <div class="rl-error-text">Oops! Something went wrong while submitting the form.</div>
                            </div>
                        </div>
                        <div class="rl_layout237_spacing-block-2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="rl_footer3_component"></div>

    <!-- Footer -->
    <div class="rl_footer1_component">
        <div class="rl-padding-global-7">
            <div class="rl-container-large-7">
                <div class="rl-padding-section-medium-3">
                    <div class="w-layout-grid rl_footer1_top-wrapper">
                        <div class="rl_footer1_left-wrapper">
                            <a href="/" class="rl_footer1_logo-link w-nav-brand">
                                <img src="https://cdn.prod.website-files.com/671ab3d6bb6b06ff95686654/672117acf5bd11fee4d780f3_curbit_logo_dark_2024.svg" loading="lazy" alt="Curbit Logo" class="rl_footer1_logo">
                            </a>
                            <div class="rl_footer1_spacing-block-1"></div>
                            <div class="rl-text-style-regular-6">Join our waitlist to be notified when Curbit becomes available in your area.</div>
                        </div>
                        <div class="w-layout-grid rl_footer1_menu-wrapper">
                            <div class="rl_footer1_link-list">
                                <div class="rl_footer_column-text">Quick Links</div>
                                <div class="rl_footer1_spacing-block-4"></div>
                                <a href="/" class="rl_footer1_link">Home</a>
                                <a href="https://billing.stripe.com/p/login/6oE7vn2MM8uh7hm8ww" target="_blank" class="rl_footer1_link">Member Login</a>
                                <a href="/careers.html" class="rl_footer1_link">Careers</a>
                                <a href="mailto:support@getcurbit.com" class="rl_footer1_link">Contact Us</a>
                            </div>
                            <div class="rl_footer1_link-list">
                                <div class="rl_footer_column-text">Legal</div>
                                <div class="rl_footer1_spacing-block-4"></div>
                                <a href="/terms.html" class="rl_footer1_link">Terms of Service</a>
                                <a href="/privacy.html" class="rl_footer1_link">Privacy Policy</a>
                                <a href="/cookies.html" class="rl_footer1_link">Cookie Policy</a>
                            </div>
                            <div class="rl_footer1_link-list hide">
                                <div class="rl_footer_column-text">Stay Connected</div>
                                <div class="rl_footer1_spacing-block-4"></div>
                                <!-- Social media links hidden for now -->
                            </div>
                        </div>
                    </div>
                    <div class="rl_footer1_spacing-block-5"></div>
                    <div class="rl_footer1_line-divider"></div>
                    <div class="rl_footer1_spacing-block-6"></div>
                    <div class="rl_footer1_bottom-wrapper">
                        <div class="rl_footer1_credit-text">© 2024 Curbit. All rights reserved.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-wrapper" style="display: none;">
        <section class="rl_modal">
            <div class="rl-padding-global-11">
                <div class="rl-container-large-10">
                    <div class="rl-padding-section-large-8">
                        <div class="rl_contact6_content">
                            <h2 class="rl-heading-style-h4">To get started, check your address.</h2>
                            <div class="rl_layout237_spacing-block-2"></div>
                            <div class="w-form">
                                <form id="wf-form-Address-form" name="wf-form-Address-form" data-name="Address form" method="get" class="form">
                                    <div class="address-input-wrapper">
                                        <input type="text" 
                                               id="address-input" 
                                               name="address"
                                               placeholder="Enter an address" 
                                               class="form-control text-field w-input"
                                               autocomplete="street-address"
                                               aria-label="Street address"
                                               inputmode="text">
                                        <input type="hidden" id="full-address" name="full-address">
                                        <div id="address-suggestions" class="suggestions-dropdown"></div>
                                    </div>
                                    <input type="submit" data-wait="Please wait..." class="rl-button-5 w-button" value="Check availability">
                                </form>
                                <div class="w-form-done">
                                    <div>Thank you! Your submission has been received!</div>
                                </div>
                                <div class="w-form-fail">
                                    <div>Oops! Something went wrong while submitting the form.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Scripts -->
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=671ab3d6bb6b06ff95686654" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="./assets/js/script.js" type="text/javascript"></script>
    <script src="./assets/js/address-validator.js" type="text/javascript"></script>
    <script>
    // Add this function to create a simple hash from email
    function createHashFromEmail(email) {
        // Create a simple hash (first 8 chars of base64 encoded email)
        return btoa(email).replace(/[/+=]/g, '').substring(0, 8);
    }

    document.addEventListener('DOMContentLoaded', () => {
        const webflowForm = document.getElementById('email-form');
        const submitButton = webflowForm.querySelector('input[type="submit"]');
        const addressData = JSON.parse(localStorage.getItem('addressData'));

        // Check URL for referral parameter on page load
        const urlParams = new URLSearchParams(window.location.search);
        const referralFrom = urlParams.get('ref');
        if (referralFrom) {
            localStorage.setItem('referralFrom', referralFrom);
        }

        if (webflowForm) {
            webflowForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const originalButtonText = submitButton.value;
                submitButton.value = submitButton.getAttribute('data-wait') || 'Please wait...';
                submitButton.disabled = true;
                
                try {
                    const email = document.getElementById('CTA-26-Email-2').value;
                    const referralId = createHashFromEmail(email);
                    
                    // Store the referral ID
                    localStorage.setItem('referralId', referralId);
                    
                    const hubspotForm = hbspt.forms.create({
                        portalId: "48274946",
                        formId: "e81dd443-9b14-4a69-adbf-73bfb7d6e9a7",
                        target: '#hubspot-form-container',
                        onFormReady: ($form) => {
                            // Set the form values
                            $form.find('input[name="email"]').val(email);
                            $form.find('input[name="address"]').val(addressData?.address || '');
                            $form.find('input[name="referral_id"]').val(referralId);
                            
                            // Add referral_from if it exists in localStorage
                            const referralFrom = localStorage.getItem('referralFrom');
                            if (referralFrom) {
                                $form.find('input[name="referral_from"]').val(referralFrom);
                            }
                            
                            // Submit the form
                            $form.submit();
                        },
                        onFormSubmitted: () => {
                            const referralLink = `${window.location.origin}?ref=${referralId}`;
                            
                            // Hide the join-waitlist section
                            const joinWaitlistSection = document.querySelector('.join-waitlist');
                            if (joinWaitlistSection) {
                                joinWaitlistSection.style.display = 'none';
                            }
                            
                            // Show success message with referral link
                            const successMessage = webflowForm.nextElementSibling;
                            if (successMessage) {
                                successMessage.innerHTML = `
                                    <div class="rl-success-text rl-heading-style-h4">Thanks for joining the Curbit waitlist! You're one step closer to a stress-free garbage day!</div>
                                    <br>
                                    <p class="rl-text-style-medium-6">Speed up the process by sharing your unique referral link with your neighbors and earn service credits when they sign up.</p>
                                    <div class="referral-section" style="margin-top: 20px;">
                                        <p>Share this link with friends:</p>
                                        <div class="referral-link-container" style="display: flex; gap: 10px;" class="rl-form-input-2">
                                            <input type="text" 
                                                   value="${referralLink}" 
                                                   readonly 
                                                   style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; flex-grow: 1;">
                                            <button onclick="copyReferralLink(this)" 
                                                    class="rl-button-5 w-button">
                                                Copy
                                            </button>
                                        </div>
                                    </div>
                                `;
                                successMessage.style.display = 'block';
                            }
                            
                            // Clear form-related stored data but keep referral data
                            localStorage.removeItem('addressData');
                            
                            // Reset and hide the form
                            webflowForm.reset();
                            webflowForm.style.display = 'none';
                        },
                        onFormSubmitError: (error) => {
                            console.error('HubSpot form error:', error);
                            const errorDiv = webflowForm.querySelector('.w-form-fail');
                            if (errorDiv) {
                                errorDiv.style.display = 'block';
                                errorDiv.textContent = 'Oops! Something went wrong while submitting the form.';
                            }
                        }
                    });
                } catch (error) {
                    console.error('Form submission error:', error);
                    const errorDiv = webflowForm.querySelector('.w-form-fail');
                    if (errorDiv) {
                        errorDiv.style.display = 'block';
                        errorDiv.textContent = 'Oops! Something went wrong while submitting the form.';
                    }
                } finally {
                    submitButton.value = originalButtonText;
                    submitButton.disabled = false;
                }
            });
        }
    });

    function copyReferralLink(button) {
        const input = button.parentElement.querySelector('input');
        input.select();
        document.execCommand('copy');
        
        const originalText = button.textContent;
        button.textContent = 'Copied!';
        button.style.background = '#28a745';
        
        setTimeout(() => {
            button.textContent = originalText;
            button.style.background = '#007bff';
        }, 2000);
    }
    </script>
    <div id="hubspot-form-container" style="display: none;"></div>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const addressData = JSON.parse(localStorage.getItem('addressData'));
        const checkedAddressElement = document.getElementById('checked_address');
        
        if (addressData && addressData.address) {
            checkedAddressElement.textContent = addressData.address;
        } else {
            // Redirect to index if no address is found
            window.location.href = '/';
        }
    });
    </script>
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="../assets/images/logo.svg" alt="Curbit Logo">
                </div>
                <div class="footer-links">
                    <a href="/">Home</a>
                    <a href="/waitlist.html">Join Waitlist</a>
                    <a href="/terms.html">Terms of Service</a>
                    <a href="/privacy.html">Privacy Policy</a>
                    <a href="/cookies.html">Cookie Policy</a>
                </div>
                <div class="footer-social">
                    <!-- Add your social media links if you have them -->
                </div>
            </div>
        </div>
    </footer>

    <!-- Add this script to handle the modal functionality -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const modalWrapper = document.querySelector('.modal-wrapper');
        const checkAvailabilityButtons = document.querySelectorAll('.checkcheck');
        
        // Show modal when "Check availability" is clicked
        checkAvailabilityButtons.forEach(button => {
            button.addEventListener('click', function() {
                modalWrapper.style.display = 'block';
            });
        });

        // Close modal when clicking outside
        modalWrapper.addEventListener('click', function(e) {
            if (e.target === modalWrapper) {
                modalWrapper.style.display = 'none';
            }
        });

        // Close modal with ESC key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && modalWrapper.style.display === 'block') {
                modalWrapper.style.display = 'none';
            }
        });

        // Handle form submission
        const addressForm = document.getElementById('wf-form-Address-form');
        if (addressForm) {
            addressForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const addressInput = document.getElementById('address-input');
                const fullAddressInput = document.getElementById('full-address');
                
                // Store the address data
                const addressData = {
                    address: addressInput.value,
                    fullAddress: fullAddressInput.value
                };
                localStorage.setItem('addressData', JSON.stringify(addressData));
                
                // Redirect to waitlist page
                window.location.href = '/waitlist.html';
            });
        }
    });

    // Add this if you're using Mapbox for address suggestions
    if (typeof mapboxgl !== 'undefined') {
        mapboxgl.accessToken = 'your_mapbox_token'; // Replace with your actual Mapbox token
    }
    </script>
</body>
</html>