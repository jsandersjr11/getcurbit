<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Great news! We service your address.</title>
    <link rel="stylesheet" href="styles.css">

     <!-- Stylesheets -->
     <link href="../assets/css/styles.css" rel="stylesheet" type="text/css">
     <link href="../assets/css/external-styles.css" rel="stylesheet" type="text/css">
     <link href="https://fonts.googleapis.com/" rel="preconnect">
     <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin="anonymous">
     <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
     
     <!-- Scripts -->
     <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
     
     <!-- Add Mapbox Search JS -->
     <script id="search-js" defer src="https://api.mapbox.com/search-js/v1.0.0-beta.21/web.js"></script>
 
     <!-- Google Places API -->
     <script type="module" src="https://unpkg.com/@googlemaps/extended-component-library@0.6"></script>
     
     <script type="text/javascript">
         WebFont.load({
             google: {
                 families: ["Inconsolata:400,700","Ubuntu:300,300italic,400,400italic,500,500italic,700,700italic"]
             }
         });
     </script>
     <script type="text/javascript">
         !function(o,c){
             var n=c.documentElement,t=" w-mod-";
             n.className+=t+"js",
             ("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")
         }(window,document);
     </script>
     <script async src="https://js.stripe.com/v3/pricing-table.js"></script>
 
 <!-- mapbox-->
 <script src='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js'></script>
 <link href='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css' rel='stylesheet' />
 
 
     
     <!-- Favicons -->
     <link href="./assets/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
     <link href="./assets/img/curbit_webclip.png" rel="apple-touch-icon">
 
     <!-- Add this in the head section -->
     <script src="https://js.radar.com/v3/radar.min.js"></script>
     <script>
       // Initialize Radar with your publishable key
       radar.initialize('prj_live_pk_...'); // Replace with your actual Radar API key
     </script>
 
     <!-- Add these styles in your existing <style> section or CSS file -->
     <style>
     .address-input-wrapper {
       position: relative;
     }
 
     .suggestions-dropdown {
       position: absolute;
       top: 100%;
       left: 0;
       right: 0;
       background: white;
       border: 1px solid #ddd;
       border-top: none;
       max-height: 200px;
       overflow-y: auto;
       display: none;
       z-index: 1000;
     }
 
     .suggestion {
       padding: 8px 12px;
       cursor: pointer;
     }
 
     .suggestion:hover {
       background-color: #f5f5f5;
     }
     </style>
 
     <!-- Crisp Chat Widget -->
     <script type="text/javascript">
         window.$crisp=[];
         window.CRISP_WEBSITE_ID="2fc9e909-bbab-4e77-8731-9cd4e914a997";
         (function(){
             d=document;
             s=d.createElement("script");
             s.src="https://client.crisp.chat/l.js";
             s.async=1;
             d.getElementsByTagName("head")[0].appendChild(s);
         })();
 
         // Wait for Crisp to load
         window.$crisp.push(["on", "session:loaded", function() {
             // Set theme color (replace with your brand color)
             $crisp.push(["set", "theme:colors", ["#4098E0"]]);
             
             // Set chat box position (right or left)
             $crisp.push(["set", "position:reverse", false]); // false for right, true for left
             
             // Set chat button position
             $crisp.push(["set", "position:button", "bottom-right"]);
             
             // Set initial message
             $crisp.push(["set", "message:text", [
                 "Hi there! ðŸ‘‹ How can we help you today?"
             ]]);
             
             // Hide file upload option
             $crisp.push(["set", "features:upload", false]);
         }]);
 
         // Example: Set user information when they log in
         function setUserInfo(email, name) {
             $crisp.push(["set", "user:email", email]);
             $crisp.push(["set", "user:nickname", name]);
         }
 
         // Example: Hide chat on specific pages
         function toggleChat() {
             if (window.location.pathname === '/privacy-policy') {
                 $crisp.push(["do", "chat:hide"]);
             } else {
                 $crisp.push(["do", "chat:show"]);
             }
         }
 
         // Example: Track custom events
         function trackCustomEvent(eventName, eventData) {
             $crisp.push(["set", "session:event", [
                 [[eventName, eventData]]
             ]]);
         }
 
         // Example: Handle chat open/close events
         $crisp.push(["on", "chat:opened", function() {
             console.log("Chat window opened");
             // Add your custom logic here
         }]);
 
         $crisp.push(["on", "chat:closed", function() {
             console.log("Chat window closed");
             // Add your custom logic here
         }]);
 
         // Example: Handle when a message is sent
         $crisp.push(["on", "message:sent", function(message) {
             console.log("Message sent:", message);
             // Add your custom logic here
         }]);
     </script>
 
     <!-- Google tag (gtag.js) -->
     <script async src="https://www.googletagmanager.com/gtag/js?id=G-LYNVTT62LV"></script>
     <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());
 
         gtag('config', 'G-LYNVTT62LV');
     </script>
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <!-- Navigation -->
    <div data-collapse="medium" 
         data-animation="default" 
         data-duration="400" 
         fs-scrolldisable-element="smart-nav" 
         data-easing="ease" 
         data-easing2="ease" 
         role="banner" 
         class="rl_navbar1_component_dark w-nav">
        <div class="rl_navbar1_container">
            <a href="/" 
               aria-current="page" 
               class="rl_navbar1_logo-link w-nav-brand w--current" 
               aria-label="home">
                <img src="../assets/img/curbit_logo_light_2024.svg" 
                     loading="lazy" 
                     alt="" 
                     class="rl_navbar1_logo">
            </a>
            <div class="rl_navbar1_menu-buttons">
                <a href="https://billing.stripe.com/p/login/6oE7vn2MM8uh7hm8ww" 
                   target="_blank" 
                   class="rl_navbar1_button w-button">Log in</a>
                <a class="rl-button-secondary checkcheck w-button">Check availability</a>
            </div>
        </div>
        <div class="w-nav-overlay" 
             data-wf-ignore="" 
             id="w-nav-overlay-0"></div>
    </div>
    <div class="container mx-auto p-4">
        <div id="service-info" class="card">
          <div class="mb-4">
            <h2 class="text-2xl"><span class="font-bold">Great news!</span> We service your address.</h2>
            <div id="checked-address-container" class="service-container">
                <div class="frequency-select">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.835 14H5C4.79653 14.0111 4.60131 14.0841 4.44046 14.2092C4.27962 14.3343 4.16083 14.5055 4.1 14.7L2.1 20.7C2 20.8 2 20.9 2 21C2 21.6 2.4 22 3 22H21C21.6 22 22 21.6 22 21C22 20.9 22 20.8 21.9 20.7L19.9 14.7C19.8392 14.5055 19.7204 14.3343 19.5595 14.2092C19.3987 14.0841 19.2035 14.0111 19 14H15.165M18 8C18 12.5 12 17 12 17C12 17 6 12.5 6 8C6 6.4087 6.63214 4.88258 7.75736 3.75736C8.88258 2.63214 10.4087 2 12 2C13.5913 2 15.1174 2.63214 16.2426 3.75736C17.3679 4.88258 18 6.4087 18 8ZM14 8C14 9.10457 13.1046 10 12 10C10.8954 10 10 9.10457 10 8C10 6.89543 10.8954 6 12 6C13.1046 6 14 6.89543 14 8Z" stroke="#18181B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                    <span id="checked-address" class="font-medium"></span>
                </div>
            </div>
            <p id="service-area-message" class="text-muted-foreground"></p>
          </div>
          <form id="service-form" class="space-y-6">
                <div id="service-details" class="space-y-6">
                  <!-- <div class="service-info-section">
                    <div class="flex justify-between items-start mb-4">
                      <h3 class="text-lg font-semibold">Your Service Information</h3>
                      <button type="button" id="edit-service-info" class="secondary">Edit</button>
                    </div>
                    <div id="service-info-display"></div>
                    <div id="service-info-form" class="hidden">
                        <div class="form-group">
                            <label for="service-day">Service Day</label>
                            <select id="service-day" required>
                                <option value="">Select service day</option>
                                <option value="Monday">Monday</option>
                                <option value="Tuesday">Tuesday</option>
                                <option value="Wednesday">Wednesday</option>
                                <option value="Thursday">Thursday</option>
                                <option value="Friday">Friday</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="trash-frequency">Trash Pickup Frequency</label>
                            <select id="trash-frequency" required>
                                <option value="">Select trash pickup frequency</option>
                                <option value="none">None</option>
                                <option value="Weekly">Weekly</option>
                                <option value="Bi-weekly">Bi-weekly</option>
                                <option value="Monthly">Monthly</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="recycling-frequency">Recycling Pickup Frequency</label>
                            <select id="recycling-frequency">
                                <option value="none">No recycling service</option>
                                <option value="Weekly">Weekly</option>
                                <option value="Bi-weekly">Bi-weekly</option>
                                <option value="Monthly">Monthly</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="compost-frequency">Compost Pickup Frequency</label>
                            <select id="compost-frequency">
                                <option value="none">No compost service</option>
                                <option value="Weekly">Weekly</option>
                                <option value="Bi-weekly">Bi-weekly</option>
                                <option value="Monthly">Monthly</option>
                            </select>
                        </div>
                        <div class="button-group">
                            <button type="button" id="cancel-edit">Cancel</button>
                            <button type="button" id="save-changes">Save Changes</button>
                        </div>
                    </div>
                  </div> -->
                    
                    <div id="bin-quantities" class="space-y-4">
                        <div class="form-group">
                            <label for="service-day">Service Day</label>
                            <select id="service-day" required>
                                <option value="">Select service day</option>
                                <option value="Monday">Monday</option>
                                <option value="Tuesday">Tuesday</option>
                                <option value="Wednesday">Wednesday</option>
                                <option value="Thursday">Thursday</option>
                                <option value="Friday">Friday</option>
                            </select>
                        </div>
                        <label for="trash-container">Select Your Bins</label>
                        <div id="trash-container" class="service-container">
                            <div class="frequency-select">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash mr-2 h-4 w-4"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path></svg>
                                <span>Trash Pickup Frequency</span>
                                <select id="trash-bin-frequency">
                                    <option value="none">No trash service</option>
                                    <option value="Weekly">Weekly</option>
                                    <option value="Bi-weekly">Bi-weekly</option>
                                    <option value="Monthly">Monthly</option>
                                </select>
                            </div>
                            <div class="input-stepper">
                                <!-- <span># of Trash Bins</span> -->
                                <button type="button" class="decrement">-</button>
                                <input type="number" id="trash-quantity" value="1" min="1" max="5">
                                <button type="button" class="increment">+</button>
                            </div>
                        </div>
                        <div id="recycling-container" class="service-container">
                            <div class="frequency-select">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-recycle mr-2 h-4 w-4"><path d="M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5"></path><path d="M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12"></path><path d="m14 16-3 3 3 3"></path><path d="M8.293 13.596 7.196 9.5 3.1 10.598"></path><path d="m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843"></path><path d="m13.378 9.633 4.096 1.098 1.097-4.096"></path></svg>
                                <span>Recycling Pickup Frequency</span>
                                <select id="recycling-bin-frequency">
                                    <option value="none">No recycling service</option>
                                    <option value="Weekly">Weekly</option>
                                    <option value="Bi-weekly">Bi-weekly</option>
                                    <option value="Monthly">Monthly</option>
                                </select>
                            </div>
                            <div class="input-stepper" id="recycling-stepper">
                                <!-- <span># of Recycling Bins</span> -->
                                <button type="button" class="decrement">-</button>
                                <input type="number" id="recycling-quantity" value="0" min="0" max="5">
                                <button type="button" class="increment">+</button>
                            </div>
                        </div>
                        <div id="compost-container" class="service-container">
                            <div class="frequency-select">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-leaf mr-2 h-4 w-4"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"></path><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"></path></svg>
                                <span>Compost Pickup Frequency</span>
                                <select id="compost-bin-frequency">
                                    <option value="none">No compost service</option>
                                    <option value="Weekly">Weekly</option>
                                    <option value="Bi-weekly">Bi-weekly</option>
                                    <option value="Monthly">Monthly</option>
                                </select>
                            </div>
                            <div class="input-stepper" id="compost-stepper">
                                <!-- <span># of Compost Bins</span> -->
                                <button type="button" class="decrement">-</button>
                                <input type="number" id="compost-quantity" value="0" min="0" max="5">
                                <button type="button" class="increment">+</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Service Start Date</label> 
                            <div class="calendar-wrapper">
                                <div class="calendar-input" id="calendar-trigger">
                                    <span id="selected-date">Select a date</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                                </div>
                                <div class="calendar-dropdown hidden" id="calendar-dropdown">
                                    <div class="calendar-header">
                                        <button type="button" class="prev-month" aria-label="Previous month">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                                        </button>
                                        <span class="current-month">February 2025</span>
                                        <button type="button" class="next-month" aria-label="Next month">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                                        </button>
                                    </div>
                                    <div class="calendar-grid">
                                        <div class="calendar-days">
                                            <span>Su</span>
                                            <span>Mo</span>
                                            <span>Tu</span>
                                            <span>We</span>
                                            <span>Th</span>
                                            <span>Fr</span>
                                            <span>Sa</span>
                                        </div>
                                        <div class="calendar-dates" id="calendar-dates"></div>
                                    </div>
                                </div>
                                <input type="hidden" id="service-start-date" required>
                            </div>
                            <p class="text-sm text-muted-foreground mt-2">* Service start dates must be at least 2 weeks out to allow for bin delivery and route scheduling.</p>
                        </div>
                    </div>
                    <div id="pricing" class="pricing-section">
                      <h3 class="text-lg font-semibold mb-2">Pricing</h3>
                      <p id="total-price" class="font-semibold"></p>
                      <p class="text-sm text-muted-foreground mt-1">
                        Base price: $39/month for one bin. Additional bins: + $10/month each (Weekly collection). + $5/month each (Bi-weekly collection). + $2.50/month (Monthly collection)
                      </p>
                    </div>
                    <button type="submit" id="checkout-button" class="primary-button">
    <span class="button-text">Sign Up for Can-to-Curb Service</span>
    <span class="button-loading hidden">Processing...</span>
</button>
<button type="button" id="return-to-form" class="secondary-button hidden">Return to Form</button>
                </div>
                <div id="reminder-section" class="hidden space-y-4">
                    <h3>Optional: Pickup Reminders</h3>
                    <div class="form-group">
                        <input type="checkbox" id="want-reminders">
                        <label for="want-reminders">I want to receive reminders</label>
                    </div>
                    <div id="reminder-options" class="hidden">
                        <div class="form-group">
                            <label>Reminder Method</label>
                            <div>
                                <input type="radio" id="sms" name="reminder-method" value="sms" checked>
                                <label for="sms">SMS</label>
                            </div>
                            <div>
                                <input type="radio" id="email" name="reminder-method" value="email">
                                <label for="email">Email</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="contact-info">Phone Number</label>
                            <input type="tel" id="contact-info" required>
                        </div>
                        <button type="button" id="sign-up-reminders">Sign Up for Reminders</button>
                    </div>
                </div>
                <div id="reminder-confirmation" class="hidden">
                    <h3>Reminder Sign-Up Confirmed</h3>
                    <p>You've successfully signed up for pickup reminders. We'll send them to you via <span id="reminder-method-display"></span>.</p>
                </div>
            </form>
        </div>
        <div class="mt-6">
          <button type="button" id="check-another-address" class="w-full secondary">Check Another Address</button>
        </div>
    </div>
    <script src="service-details.js"></script>
</body>
</html>

